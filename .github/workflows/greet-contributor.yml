name: Thank Contributors

on:
  pull_request:
    types: [closed]

jobs:
  thank:
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true

    steps:
      - name: Thank contributor for merged PR
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const contributor = context.payload.pull_request.user.login;
            const prNumber = context.payload.pull_request.number;
            const prTitle = context.payload.pull_request.title;
            const mergedBy = context.payload.pull_request.merged_by.login;

            // Build the comment body
            const commentBody = `ðŸŽ‰ Thank you @${contributor} for your contribution!\n\n` +
                                `Your pull request #${prNumber} "${prTitle}" has been successfully merged! ðŸš€\n\n` +
                                `We appreciate your effort in making this project better! âœ¨\n\n` +
                                `Merged by: @${mergedBy}`;

            // Create a comment on the merged PR
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: prNumber,
              body: commentBody
            });
